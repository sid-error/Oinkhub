[{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\Context\\ChatProvider.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  13 |     useEffect(() => {\n  14 |         const userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\n> 15 |         setUser(userInfo);\n     |         ^^^^^^^ Avoid calling setState() directly within an effect\n  16 |\n  17 |         // If user is not logged in, redirect to home/login page\n  18 |         if (!userInfo) {","line":15,"column":9,"nodeType":null,"endLine":15,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst ChatContext = createContext();\r\n\r\nconst ChatProvider = ({ children }) => {\r\n    const [user, setUser] = useState();\r\n    const [selectedChat, setSelectedChat] = useState();\r\n    const [chats, setChats] = useState([]);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n        setUser(userInfo);\r\n\r\n        // If user is not logged in, redirect to home/login page\r\n        if (!userInfo) {\r\n            navigate(\"/\");\r\n        }\r\n    }, [navigate]);\r\n\r\n    return (\r\n        <ChatContext.Provider\r\n            value={{\r\n                user,\r\n                setUser,\r\n                selectedChat,\r\n                setSelectedChat,\r\n                chats,\r\n                setChats,\r\n            }}\r\n        >\r\n            {children}\r\n        </ChatContext.Provider>\r\n    );\r\n};\r\n\r\nexport const ChatState = () => {\r\n    return useContext(ChatContext);\r\n};\r\n\r\nexport default ChatProvider;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\Pages\\Chatpage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\Pages\\Homepage.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\components\\Authentication\\Login.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\components\\Authentication\\Signup.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\components\\UserAvatar\\UserBadgeItem.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\components\\UserAvatar\\UserListItem.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\components\\miscellaneous\\ChatBox.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\components\\miscellaneous\\GroupChatModal.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":40,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":82,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":82,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    Box,\r\n    Button,\r\n    Dialog,\r\n    Field,\r\n    Input,\r\n    VStack,\r\n    Text,\r\n    Spinner,\r\n} from \"@chakra-ui/react\";\r\nimport { useState } from \"react\";\r\nimport { ChatState } from \"../../Context/ChatProvider\";\r\nimport axios from \"axios\";\r\nimport { toaster } from \"../ui/toaster\";\r\nimport UserListItem from \"../UserAvatar/UserListItem\";\r\nimport UserBadgeItem from \"../UserAvatar/UserBadgeItem\";\r\n\r\nconst GroupChatModal = ({ children }) => {\r\n    const [groupChatName, setGroupChatName] = useState();\r\n    const [selectedUsers, setSelectedUsers] = useState([]);\r\n    const [search, setSearch] = useState(\"\");\r\n    const [searchResult, setSearchResult] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const { user, chats, setChats } = ChatState();\r\n\r\n    const handleSearch = async (query) => {\r\n        setSearch(query);\r\n        if (!query) return;\r\n\r\n        try {\r\n            setLoading(true);\r\n            const config = {\r\n                headers: { Authorization: `Bearer ${user.token}` },\r\n            };\r\n            const { data } = await axios.get(`/api/user?search=${search}`, config);\r\n            setLoading(false);\r\n            setSearchResult(data);\r\n        } catch (error) {\r\n            toaster.create({\r\n                title: \"Error Occured!\",\r\n                description: \"Failed to Load the Search Results\",\r\n                type: \"error\",\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleGroup = (userToAdd) => {\r\n        if (selectedUsers.includes(userToAdd)) {\r\n            toaster.create({ title: \"User already added\", type: \"warning\" });\r\n            return;\r\n        }\r\n        setSelectedUsers([...selectedUsers, userToAdd]);\r\n    };\r\n\r\n    const handleDelete = (delUser) => {\r\n        setSelectedUsers(selectedUsers.filter((sel) => sel._id !== delUser._id));\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (!groupChatName || !selectedUsers) {\r\n            toaster.create({ title: \"Please fill all fields\", type: \"warning\" });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const config = {\r\n                headers: { Authorization: `Bearer ${user.token}` },\r\n            };\r\n            const { data } = await axios.post(\r\n                `/api/chat/group`,\r\n                {\r\n                    name: groupChatName,\r\n                    users: JSON.stringify(selectedUsers.map((u) => u._id)),\r\n                },\r\n                config\r\n            );\r\n            setChats([data, ...chats]);\r\n            setOpen(false);\r\n            toaster.create({ title: \"New Group Chat Created!\", type: \"success\" });\r\n        } catch (error) {\r\n            toaster.create({ title: \"Failed to Create the Chat!\", type: \"error\" });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog.Root open={open} onOpenChange={(e) => setOpen(e.open)}>\r\n            <Dialog.Trigger asChild>{children}</Dialog.Trigger>\r\n            <Dialog.Content>\r\n                <Dialog.Header fontSize=\"35px\" display=\"flex\" justifyContent=\"center\">\r\n                    Create Group Oink 游냥\r\n                </Dialog.Header>\r\n                <Dialog.CloseTrigger />\r\n                <Dialog.Body display=\"flex\" flexDir=\"column\" alignItems=\"center\">\r\n                    <VStack gap={4} w=\"100%\">\r\n                        <Field.Root>\r\n                            <Input\r\n                                placeholder=\"Chat Name\"\r\n                                mb={3}\r\n                                onChange={(e) => setGroupChatName(e.target.value)}\r\n                            />\r\n                        </Field.Root>\r\n                        <Field.Root>\r\n                            <Input\r\n                                placeholder=\"Add Users eg: John, Jane\"\r\n                                mb={1}\r\n                                onChange={(e) => handleSearch(e.target.value)}\r\n                            />\r\n                        </Field.Root>\r\n\r\n                        <Box w=\"100%\" display=\"flex\" flexWrap=\"wrap\">\r\n                            {selectedUsers.map((u) => (\r\n                                <UserBadgeItem\r\n                                    key={u._id}\r\n                                    user={u}\r\n                                    handleFunction={() => handleDelete(u)}\r\n                                />\r\n                            ))}\r\n                        </Box>\r\n\r\n                        {loading ? (\r\n                            <Spinner />\r\n                        ) : (\r\n                            searchResult\r\n                                ?.slice(0, 4)\r\n                                .map((user) => (\r\n                                    <UserListItem\r\n                                        key={user._id}\r\n                                        user={user}\r\n                                        handleFunction={() => handleGroup(user)}\r\n                                    />\r\n                                ))\r\n                        )}\r\n                    </VStack>\r\n                </Dialog.Body>\r\n                <Dialog.Footer>\r\n                    <Button colorScheme=\"pink\" onClick={handleSubmit}>\r\n                        Create Chat\r\n                    </Button>\r\n                </Dialog.Footer>\r\n            </Dialog.Content>\r\n        </Dialog.Root>\r\n    );\r\n};\r\n\r\nexport default GroupChatModal;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\components\\miscellaneous\\MyChats.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useState' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"useState"},"fix":{"range":[80,90],"text":""},"desc":"Remove unused variable 'useState'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":18,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchChats'. Either include it or remove the dependency array.","line":25,"column":8,"nodeType":"ArrayExpression","endLine":25,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAgain, fetchChats]","fix":{"range":[821,833],"text":"[fetchAgain, fetchChats]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Box, Stack, Text, Button } from \"@chakra-ui/react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { ChatState } from \"../../Context/ChatProvider\";\r\nimport axios from \"axios\";\r\nimport { Plus } from \"lucide-react\";\r\nimport GroupChatModal from \"./GroupChatModal\";\r\n\r\nconst MyChats = ({ fetchAgain }) => {\r\n    const { user, selectedChat, setSelectedChat, chats, setChats } = ChatState();\r\n\r\n    const fetchChats = async () => {\r\n        try {\r\n            const config = {\r\n                headers: { Authorization: `Bearer ${user.token}` },\r\n            };\r\n            const { data } = await axios.get(\"/api/chat\", config);\r\n            setChats(data);\r\n        } catch (error) {\r\n            console.log(\"Failed to load chats\");\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchChats();\r\n    }, [fetchAgain]); // Re-fetch if a chat is deleted/added\r\n\r\n    return (\r\n        <Box\r\n            display={{ base: selectedChat ? \"none\" : \"flex\", md: \"flex\" }}\r\n            flexDir=\"column\"\r\n            alignItems=\"center\"\r\n            p={3}\r\n            bg=\"white\"\r\n            w={{ base: \"100%\", md: \"31%\" }}\r\n            borderRadius=\"lg\"\r\n            borderWidth=\"1px\"\r\n        >\r\n            <Box\r\n                pb={3}\r\n                px={3}\r\n                fontSize={{ base: \"28px\", md: \"30px\" }}\r\n                display=\"flex\"\r\n                w=\"100%\"\r\n                justifyContent=\"space-between\"\r\n                alignItems=\"center\"\r\n            >\r\n                My Chats\r\n                <GroupChatModal>\r\n                    <Button display=\"flex\" fontSize={{ base: \"17px\", md: \"10px\", lg: \"17px\" }}>\r\n                        New Group <Plus size={20} />\r\n                    </Button>\r\n                </GroupChatModal>\r\n            </Box>\r\n\r\n            <Box\r\n                display=\"flex\"\r\n                flexDir=\"column\"\r\n                p={3}\r\n                bg=\"#F8F8F8\"\r\n                w=\"100%\"\r\n                h=\"100%\"\r\n                borderRadius=\"lg\"\r\n                overflowY=\"hidden\"\r\n            >\r\n                {chats ? (\r\n                    <Stack overflowY=\"scroll\">\r\n                        {chats.map((chat) => (\r\n                            <Box\r\n                                onClick={() => setSelectedChat(chat)}\r\n                                cursor=\"pointer\"\r\n                                bg={selectedChat === chat ? \"#F687B3\" : \"#E8E8E8\"}\r\n                                color={selectedChat === chat ? \"white\" : \"black\"}\r\n                                px={3}\r\n                                py={2}\r\n                                borderRadius=\"lg\"\r\n                                key={chat._id}\r\n                            >\r\n                                <Text>\r\n                                    {!chat.isGroupChat\r\n                                        ? chat.users[0]._id === user._id ? chat.users[1].name : chat.users[0].name\r\n                                        : chat.chatName}\r\n                                </Text>\r\n                            </Box>\r\n                        ))}\r\n                    </Stack>\r\n                ) : (\r\n                    <Text>Loading...</Text>\r\n                )}\r\n            </Box>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default MyChats;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\components\\miscellaneous\\ScrollableChat.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'i' is defined but never used.","line":12,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"i"},"fix":{"range":[373,376],"text":""},"desc":"Remove unused variable 'i'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport ScrollableFeed from \"react-scrollable-feed\";\r\nimport { ChatState } from \"../Context/ChatProvider\";\r\nimport { Tooltip, Avatar, Box } from \"@chakra-ui/react\";\r\n\r\nconst ScrollableChat = ({ messages }) => {\r\n    const { user } = ChatState();\r\n\r\n    return (\r\n        <ScrollableFeed>\r\n            {messages &&\r\n                messages.map((m, i) => (\r\n                    <div style={{ display: \"flex\" }} key={m._id}>\r\n                        {/* Show avatar only if it's a group chat or the other person */}\r\n                        {(m.sender._id !== user._id) && (\r\n                            <Tooltip label={m.sender.name} placement=\"bottom-start\" hasArrow>\r\n                                <Avatar\r\n                                    mt=\"7px\"\r\n                                    mr={1}\r\n                                    size=\"sm\"\r\n                                    cursor=\"pointer\"\r\n                                    name={m.sender.name}\r\n                                    src={m.sender.profilePic}\r\n                                />\r\n                            </Tooltip>\r\n                        )}\r\n                        <span\r\n                            style={{\r\n                                backgroundColor: `${m.sender._id === user._id ? \"#F687B3\" : \"#BEE3F8\"\r\n                                    }`,\r\n                                borderRadius: \"20px\",\r\n                                padding: \"5px 15px\",\r\n                                maxWidth: \"75%\",\r\n                                marginLeft: m.sender._id === user._id ? \"auto\" : \"0\",\r\n                                marginTop: \"10px\",\r\n                                color: m.sender._id === user._id ? \"white\" : \"black\",\r\n                            }}\r\n                        >\r\n                            {m.content}\r\n                        </span>\r\n                    </div>\r\n                ))}\r\n        </ScrollableFeed>\r\n    );\r\n};\r\n\r\nexport default ScrollableChat;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\components\\miscellaneous\\SideDrawer.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'searchResult' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":14,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"searchResult"},"fix":{"range":[614,626],"text":""},"desc":"Remove unused variable 'searchResult'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'loadingChat' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":16,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadingChat"},"fix":{"range":[725,736],"text":""},"desc":"Remove unused variable 'loadingChat'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'accessChat' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":22,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"accessChat"},"fix":{"range":[990,1976],"text":""},"desc":"Remove unused variable 'accessChat'."}]},{"ruleId":"no-undef","severity":2,"message":"'toaster' is not defined.","line":42,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":67,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":23}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport {\r\n    Box, Button, Tooltip, Text, Menu, MenuButton, MenuList,\r\n    Avatar, MenuItem, MenuDivider, Drawer, DrawerOverlay,\r\n    DrawerContent, DrawerHeader, DrawerBody, Input, useToast, Spinner\r\n} from \"@chakra-ui/react\";\r\nimport { SearchIcon, BellIcon, ChevronDownIcon } from \"@chakra-ui/icons\"; // You might need to install @chakra-ui/icons\r\nimport { ChatState } from \"../../Context/ChatProvider\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst SideDrawer = () => {\r\n    const [search, setSearch] = useState(\"\");\r\n    const [searchResult, setSearchResult] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [loadingChat, setLoadingChat] = useState(false);\r\n    const [isOpen, setIsOpen] = useState(false); // Manual drawer state\r\n\r\n    const { user, setSelectedChat, chats, setChats } = ChatState();\r\n    const navigate = useNavigate();\r\n    const toast = useToast();\r\n    const accessChat = async (userId) => {\r\n        try {\r\n            setLoadingChat(true);\r\n            const config = {\r\n                headers: {\r\n                    \"Content-type\": \"application/json\",\r\n                    Authorization: `Bearer ${user.token}`,\r\n                },\r\n            };\r\n\r\n            // Make the request to our backend API\r\n            const { data } = await axios.post(`/api/chat`, { userId }, config);\r\n\r\n            // If the chat is already in our 'chats' list, don't duplicate it\r\n            if (!chats.find((c) => c._id === data._id)) setChats([data, ...chats]);\r\n\r\n            setSelectedChat(data); // Highlight this chat in the UI\r\n            setLoadingChat(false);\r\n            setIsOpen(false); // Close the search drawer\r\n        } catch (error) {\r\n            toaster.create({\r\n                title: \"Error fetching the chat\",\r\n                description: error.message,\r\n                type: \"error\",\r\n            });\r\n        }\r\n    };\r\n\r\n    const logoutHandler = () => {\r\n        localStorage.removeItem(\"userInfo\");\r\n        navigate(\"/\");\r\n    };\r\n\r\n    const handleSearch = async () => {\r\n        if (!search) {\r\n            toast({ title: \"Please enter something in search\", status: \"warning\", duration: 3000, isClosable: true, position: \"top-left\" });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            const config = { headers: { Authorization: `Bearer ${user.token}` } };\r\n            const { data } = await axios.get(`/api/user?search=${search}`, config);\r\n            setLoading(false);\r\n            setSearchResult(data);\r\n        } catch (error) {\r\n            toast({ title: \"Error Occured!\", description: \"Failed to Load the Search Results\", status: \"error\", duration: 5000, isClosable: true, position: \"bottom-left\" });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" bg=\"white\" w=\"100%\" p=\"5px 10px 5px 10px\" borderWidth=\"5px\" borderColor=\"pink.100\">\r\n                <Tooltip label=\"Search Users to chat\" hasArrow placement=\"bottom-end\">\r\n                    <Button variant=\"ghost\" onClick={() => setIsOpen(true)}>\r\n                        <i className=\"fas fa-search\"></i>\r\n                        <Text display={{ base: \"none\", md: \"flex\" }} px={4}>Search User</Text>\r\n                    </Button>\r\n                </Tooltip>\r\n\r\n                <Text fontSize=\"2xl\" fontWeight=\"bold\" color=\"pink.500\">OinkHub 游냥</Text>\r\n\r\n                <div>\r\n                    <Menu>\r\n                        <MenuButton p={1}>\r\n                            <BellIcon fontSize=\"2xl\" m={1} />\r\n                        </MenuButton>\r\n                        {/* Notification list will go here later */}\r\n                    </Menu>\r\n                    <Menu>\r\n                        <MenuButton as={Button} rightIcon={<ChevronDownIcon />}>\r\n                            <Avatar size=\"sm\" cursor=\"pointer\" name={user.name} src={user.profilePic} />\r\n                        </MenuButton>\r\n                        <MenuList>\r\n                            <MenuItem>My Profile</MenuItem>\r\n                            <MenuDivider />\r\n                            <MenuItem onClick={logoutHandler}>Logout</MenuItem>\r\n                        </MenuList>\r\n                    </Menu>\r\n                </div>\r\n            </Box>\r\n\r\n            <Drawer placement=\"left\" onClose={() => setIsOpen(false)} isOpen={isOpen}>\r\n                <DrawerOverlay />\r\n                <DrawerContent>\r\n                    <DrawerHeader borderBottomWidth=\"1px\">Search Pigs</DrawerHeader>\r\n                    <DrawerBody>\r\n                        <Box display=\"flex\" pb={2}>\r\n                            <Input placeholder=\"Search by name or email\" mr={2} value={search} onChange={(e) => setSearch(e.target.value)} />\r\n                            <Button onClick={handleSearch} isLoading={loading}>Go</Button>\r\n                        </Box>\r\n                        {/* Search results will be mapped here */}\r\n                    </DrawerBody>\r\n                </DrawerContent>\r\n            </Drawer>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SideDrawer;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\components\\miscellaneous\\SingleChat.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'fetchAgain' is defined but never used.","line":13,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"fetchAgain"},"fix":{"range":[485,496],"text":""},"desc":"Remove unused variable 'fetchAgain'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'setFetchAgain' is defined but never used.","line":13,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":48,"suggestions":[{"messageId":"removeVar","data":{"varName":"setFetchAgain"},"fix":{"range":[495,510],"text":""},"desc":"Remove unused variable 'setFetchAgain'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchMessages'. Either include it or remove the dependency array.","line":39,"column":8,"nodeType":"ArrayExpression","endLine":39,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [fetchMessages, selectedChat]","fix":{"range":[1467,1481],"text":"[fetchMessages, selectedChat]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":75,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":103,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":103,"endColumn":27}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Box, Text, IconButton, Spinner, Input, Field } from \"@chakra-ui/react\";\r\nimport { ChatState } from \"../../Context/ChatProvider\";\r\nimport { ArrowLeft } from \"lucide-react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport io from \"socket.io-client\";\r\nimport ScrollableChat from \"./ScrollableChat\";\r\nimport { toaster } from \"../ui/toaster\";\r\n\r\nconst ENDPOINT = \"http://localhost:5000\";\r\nlet socket, selectedChatCompare;\r\n\r\nconst SingleChat = ({ fetchAgain, setFetchAgain }) => {\r\n    const { user, selectedChat, setSelectedChat } = ChatState();\r\n    const [messages, setMessages] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [newMessage, setNewMessage] = useState(\"\");\r\n    const [socketConnected, setSocketConnected] = useState(false);\r\n    const [typing, setTyping] = useState(false);\r\n    const [isTyping, setIsTyping] = useState(false);\r\n\r\n    // 1. Initialize Socket Connection\r\n    useEffect(() => {\r\n        socket = io(ENDPOINT);\r\n        socket.emit(\"setup\", user);\r\n        socket.on(\"connected\", () => setSocketConnected(true));\r\n        socket.on(\"typing\", () => setIsTyping(true));\r\n        socket.on(\"stop_typing\", () => setIsTyping(false));\r\n\r\n        return () => {\r\n            socket.disconnect();\r\n        };\r\n    }, [user]);\r\n\r\n    // 2. Fetch Messages when chat changes\r\n    useEffect(() => {\r\n        fetchMessages();\r\n        selectedChatCompare = selectedChat;\r\n    }, [selectedChat]);\r\n\r\n    // 3. Listen for Incoming Messages (Using functional state to avoid stale closures)\r\n    useEffect(() => {\r\n        const messageListener = (newMessageReceived) => {\r\n            if (\r\n                !selectedChatCompare ||\r\n                selectedChatCompare._id !== newMessageReceived.chat._id\r\n            ) {\r\n                // Handle Notifications here if the chat isn't currently open\r\n            } else {\r\n                setMessages((prevMessages) => [...prevMessages, newMessageReceived]);\r\n            }\r\n        };\r\n\r\n        socket.on(\"message_received\", messageListener);\r\n\r\n        return () => {\r\n            socket.off(\"message_received\", messageListener);\r\n        };\r\n    }, []);\r\n\r\n    const fetchMessages = async () => {\r\n        if (!selectedChat) return;\r\n\r\n        try {\r\n            setLoading(true);\r\n            const config = {\r\n                headers: { Authorization: `Bearer ${user.token}` },\r\n            };\r\n\r\n            const { data } = await axios.get(`/api/message/${selectedChat._id}`, config);\r\n            setMessages(data);\r\n            setLoading(false);\r\n\r\n            socket.emit(\"join_chat\", selectedChat._id);\r\n        } catch (error) {\r\n            toaster.create({\r\n                title: \"Error Occurred!\",\r\n                description: \"Failed to Load the Messages\",\r\n                type: \"error\",\r\n            });\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const sendMessage = async (event) => {\r\n        if (event.key === \"Enter\" && newMessage) {\r\n            socket.emit(\"stop_typing\", selectedChat._id);\r\n            try {\r\n                const config = {\r\n                    headers: {\r\n                        \"Content-type\": \"application/json\",\r\n                        Authorization: `Bearer ${user.token}`,\r\n                    },\r\n                };\r\n                setNewMessage(\"\");\r\n                const { data } = await axios.post(\r\n                    \"/api/message\",\r\n                    { content: newMessage, chatId: selectedChat._id },\r\n                    config\r\n                );\r\n                socket.emit(\"new_message\", data);\r\n                setMessages([...messages, data]);\r\n            } catch (error) {\r\n                toaster.create({\r\n                    title: \"Error Occurred!\",\r\n                    description: \"Failed to send the Message\",\r\n                    type: \"error\",\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const typingHandler = (e) => {\r\n        setNewMessage(e.target.value);\r\n\r\n        if (!socketConnected) return;\r\n\r\n        if (!typing) {\r\n            setTyping(true);\r\n            socket.emit(\"typing\", selectedChat._id);\r\n        }\r\n\r\n        let lastTypingTime = new Date().getTime();\r\n        let timerLength = 3000;\r\n        setTimeout(() => {\r\n            let timeNow = new Date().getTime();\r\n            let timeDiff = timeNow - lastTypingTime;\r\n            if (timeDiff >= timerLength && typing) {\r\n                socket.emit(\"stop_typing\", selectedChat._id);\r\n                setTyping(false);\r\n            }\r\n        }, timerLength);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {selectedChat ? (\r\n                <>\r\n                    <Text\r\n                        fontSize={{ base: \"28px\", md: \"30px\" }}\r\n                        pb={3}\r\n                        px={2}\r\n                        w=\"100%\"\r\n                        display=\"flex\"\r\n                        justifyContent={{ base: \"space-between\" }}\r\n                        alignItems=\"center\"\r\n                        color=\"pink.500\"\r\n                        fontWeight=\"bold\"\r\n                    >\r\n                        <IconButton\r\n                            display={{ base: \"flex\", md: \"none\" }}\r\n                            variant=\"ghost\"\r\n                            onClick={() => setSelectedChat(\"\")}\r\n                        >\r\n                            <ArrowLeft />\r\n                        </IconButton>\r\n                        {!selectedChat.isGroupChat ? (\r\n                            <>{selectedChat.users[0]._id === user._id ? selectedChat.users[1].name : selectedChat.users[0].name}</>\r\n                        ) : (\r\n                            <>{selectedChat.chatName.toUpperCase()}</>\r\n                        )}\r\n                    </Text>\r\n\r\n                    <Box\r\n                        display=\"flex\"\r\n                        flexDir=\"column\"\r\n                        justifyContent=\"flex-end\"\r\n                        p={3}\r\n                        bg=\"#fdf2f4\" // Piggy light pink background\r\n                        w=\"100%\"\r\n                        h=\"100%\"\r\n                        borderRadius=\"lg\"\r\n                        overflowY=\"hidden\"\r\n                    >\r\n                        {loading ? (\r\n                            <Spinner size=\"xl\" w={20} h={20} alignSelf=\"center\" margin=\"auto\" color=\"pink.400\" />\r\n                        ) : (\r\n                            <div className=\"messages\" style={{ display: \"flex\", flexDirection: \"column\", overflowY: \"auto\", scrollbarWidth: \"none\" }}>\r\n                                <ScrollableChat messages={messages} />\r\n                            </div>\r\n                        )}\r\n\r\n                        {isTyping ? (\r\n                            <Text fontSize=\"xs\" color=\"gray.500\" fontStyle=\"italic\" mt={1}>\r\n                                Piggy is typing... 游냥\r\n                            </Text>\r\n                        ) : null}\r\n\r\n                        <Field.Root mt={3} onKeyDown={sendMessage}>\r\n                            <Input\r\n                                variant=\"filled\"\r\n                                bg=\"white\"\r\n                                _focus={{ bg: \"white\", borderColor: \"pink.300\" }}\r\n                                placeholder=\"Oink a message...\"\r\n                                onChange={typingHandler}\r\n                                value={newMessage}\r\n                            />\r\n                        </Field.Root>\r\n                    </Box>\r\n                </>\r\n            ) : (\r\n                <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" h=\"100%\">\r\n                    <Text fontSize=\"3xl\" color=\"pink.300\">\r\n                        Click on a pig to start oinking! 游냥\r\n                    </Text>\r\n                </Box>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SingleChat;","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\components\\ui\\toaster.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":4,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":4,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { Toaster as ChakraToaster, createToaster } from \"@chakra-ui/react\"\r\n\r\nexport const toaster = createToaster({\r\n    placement: \"bottom\",\r\n    pauseOnHover: true,\r\n})\r\n\r\nexport const Toaster = () => {\r\n    return <ChakraToaster toaster={toaster} />\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\sidha\\OneDrive\\Desktop\\Oinkhub\\frontend\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
